<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="XRot 95 EVO - Inteligentní systém řízení autonomního stroje">
    <title>XRot 95 EVO - Control Unit</title>

    <link rel="manifest" href="manifest.json">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="particles" id="particles"></div>

    <div id="critical_alert">
        <div class="alert-content">
            <i class="fa-solid fa-triangle-exclamation pulse-icon"></i>
            <h1>KRITICKÁ CHYBA</h1>
            <p id="alert_message">SYSTEM FAILURE</p>
            <button onclick="emergencyReset()" class="btn btn-danger-outline">
                <i class="fa-solid fa-power-off"></i> NOUZOVÝ RESET
            </button>
        </div>
    </div>

    <div class="app-container glass-card">
        
        <div class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon"><i class="fa-solid fa-robot"></i></div>
                    <div class="logo-text">
                        <h1>BARBIERI XROT 95</h1>
                        <p>EVO DIAGNOSTIC SYSTEM • v2.0</p>
                    </div>
                </div>
                
                <div class="status-indicators">
                    <div class="status-pill">
                        <span class="status-pill-label">GPS RTK</span>
                        <span id="gps_status" class="status-pill-value status-ok">FIXED (±2cm)</span>
                    </div>
                    <div class="status-pill">
                        <span class="status-pill-label">Baterie</span>
                        <span id="battery_val" class="status-pill-value">98%</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="nav-container">
            <ul class="nav">
                <li class="nav-item active"><i class="fa-solid fa-gauge-high"></i> Live Data</li>
                <li class="nav-item"><i class="fa-solid fa-chart-line"></i> Telemetrie</li>
                <li class="nav-item"><i class="fa-solid fa-map-location-dot"></i> Mapa</li>
                <li class="nav-item"><i class="fa-solid fa-book"></i> E-Manuál</li>
            </ul>
        </div>

        <div class="content-wrapper">
            
            <div class="grid grid-4 mb-2">
                <div class="stat-card" id="card_tilt">
                    <span id="tilt_val" class="stat-value">0°</span>
                    <span class="stat-label">Svahová dostupnost</span>
                    <div class="progress mt-1">
                        <div id="tilt_bar" class="progress-bar" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <span id="temp_val" class="stat-value">60°C</span>
                    <span class="stat-label">Teplota Oleje</span>
                </div>

                <div class="stat-card highlight">
                    <span id="rpm_val" class="stat-value">0</span>
                    <span class="stat-label">RPM (Kawasaki)</span>
                </div>

                <div class="stat-card">
                    <span id="load_val" class="stat-value">0 A</span>
                    <span class="stat-label">Zátěž Nožů (PTO)</span>
                </div>
            </div>

            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fa-solid fa-gamepad"></i> Dálkové Řízení</h3>
                    </div>
                    <div class="control-panel-body">
                        <button id="btn_start" class="btn btn-primary mb-1">
                            <i class="fa-solid fa-play"></i> START MOTORU
                        </button>
                        <div class="d-flex gap-1">
                            <button id="btn_pto" class="btn btn-warning flex-1" disabled>
                                <i class="fa-solid fa-fan"></i> PTO (Nože)
                            </button>
                            <button id="btn_stop" class="btn btn-danger flex-1">
                                <i class="fa-solid fa-stop"></i> STOP
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fa-solid fa-shield-halved"></i> AI Watchdog Log</h3>
                    </div>
                    <div id="system_log" class="log-window">
                        <div class="log-entry success">[SYSTEM] Booting XRot Core...</div>
                        <div class="log-entry">[SYSTEM] API Connection: Established</div>
                    </div>
                </div>
            </div>
            
            <div class="mt-2">
                 <div class="card no-padding overflow-hidden bg-black">
                     <div id="camera_feed" class="camera-placeholder">
                         <i class="fa-solid fa-video-slash"></i>
                         <span>Čekám na signál z kamery...</span>
                     </div>
                 </div>
             </div>

        </div>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(() => console.log('Service Worker Registered'))
                .catch(err => console.error('Service Worker Failed', err));
        }
    </script>

    <script src="app.js"></script>
</body>
</html>
